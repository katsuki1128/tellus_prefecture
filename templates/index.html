<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AVNIR-2 Scene Search</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="{{ url_for('static', filename='updateCities.js') }}"></script>
</head>

<body>
    <h3>JAXA 人工衛星「だいち」AVNIR-2シーン検索</h3>

    <div class="content">
        <div class="image-column">
            <img src="{{ url_for('static', filename='img/20060217_daichi-2_2.jpg') }}" alt="daichi" class="half-size">
        </div>
        <div class="text-column">
            <h4>高性能可視近赤外線放射計2型（AVNIR-2）</h4>
            <p>AVNIR-2は、可視・近赤外域の観測波長を用いて、陸域・沿岸の把握等に必要な土地被覆分類図、土地利用分類図などの作成を行います。
            </p>
        </div>
    </div>

    <form method="POST" id="imageForm">
        <div>
            <!-- <label for="prefecture"></label> -->
            <!-- <select id="prefecture" name="prefecture" onchange="updatePrefecture()" required> -->
            <select id="prefecture" name="prefecture" onchange="updatePrefecture()"
                data-selected-prefecture="{{ selected_prefecture }}" required>
                <option value="">都道府県</option>
                {% for code, name in pref_codes.items() %}
                <option value="{{ code }}" {% if code==selected_prefecture %} selected {% endif %}>
                    {{ name }}
                </option>
                {% endfor %}
            </select>


            <!-- <label for="city_name"></label> -->
            <select id="city_name" name="city_name" data-selected-city="{{ selected_city }}" required>
                <option value="">市区町村</option>
                {% for name in city_names %}
                <option value="{{ name }}" {% if name==selected_city %}selected{% endif %}>
                    {{ name }}
                </option>
                {% endfor %}
            </select>


            <button type="submit" name="action" value="get_map">選択</button>
        </div>
        <div>
            <label for="tellus_name">地図範囲を選択:</label>
            <select id="tellus_name" name="tellus_name">
                <option value="">Select 'tellus:name'</option>
                {% for tellus_name in tellus_names %}
                <option value="{{ tellus_name }}" {% if tellus_name==selected_tellus_name %}selected{% endif %}>
                    {{ tellus_name }}
                </option>
                {% endfor %}
            </select>

            <button type="submit" name="action" value="get_image">衛星画像取得</button>
        </div>
    </form>

    <p id="responseMessage"></p>

    {% if error_message %}
    <p style="color:red;">Error: {{ error_message }}</p>
    {% endif %}

    {% if map_html %}
    <iframe id="map_iframe" src="{{ map_html }}" width="100%" height="500px"></iframe>
    {% endif %}

    {% if output_image_path %}
    <h2>True Color Image</h2>
    <img src="{{ output_image_path }}" alt="True Color Image" width="600">
    {% endif %}
</body>

</html>